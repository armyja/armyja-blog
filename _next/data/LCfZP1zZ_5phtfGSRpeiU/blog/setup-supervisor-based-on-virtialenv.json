{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var d=Object.create;var r=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(n,s)=>()=>(s||n((s={exports:{}}).exports,s),s.exports),N=(n,s)=>{for(var l in s)r(n,l,{get:s[l],enumerable:!0})},i=(n,s,l,a)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let c of p(s))!u.call(n,c)&&c!==l&&r(n,c,{get:()=>s[c],enumerable:!(a=h(s,c))||a.enumerable});return n};var v=(n,s,l)=>(l=n!=null?d(m(n)):{},i(s||!n||!n.__esModule?r(l,\"default\",{value:n,enumerable:!0}):l,n)),b=n=>i(r({},\"__esModule\",{value:!0}),n);var t=g((X,o)=>{o.exports=_jsx_runtime});var x={};N(x,{default:()=>y,frontmatter:()=>k});var e=v(t()),k={title:\"\\u914D\\u7F6E\\u57FA\\u4E8E virtualenv \\u7684 supervisor\",slug:\"setup-supervisor-based-on-virtialenv\",date_published:new Date(1468292383e3),date_updated:new Date(1520560223e3),author:\"Jeffey Wang\",tags:\"Python, Virtualenv, Supervisor\",summary:\"supervisor \\u662F\\u57FA\\u4E8E python \\u7684\\u4EFB\\u52A1\\u7BA1\\u7406\\u5DE5\\u5177\\uFF0C\\u7528\\u6765\\u81EA\\u52A8\\u8FD0\\u884C\\u5404\\u79CD\\u540E\\u53F0\\u4EFB\\u52A1\\u3002virtualenv \\u662F python \\u7684\\u4E00\\u4E2A\\u865A\\u62DF\\u73AF\\u5883\\u7BA1\\u7406\\u5DE5\\u5177\\uFF0C\\u7528\\u6765\\u90E8\\u7F72\\u8FD0\\u884C\\u4E0D\\u540C\\u7684 python \\u7248\\u672C\\u3002\"};function f(n={}){let{wrapper:s}=n.components||{};return s?(0,e.jsx)(s,Object.assign({},n,{children:(0,e.jsx)(l,{})})):l();function l(){let a=Object.assign({p:\"p\",h2:\"h2\",a:\"a\",span:\"span\",pre:\"pre\",code:\"code\"},n.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(a.p,{children:\"supervisor \\u662F\\u57FA\\u4E8E python \\u7684\\u4EFB\\u52A1\\u7BA1\\u7406\\u5DE5\\u5177\\uFF0C\\u7528\\u6765\\u81EA\\u52A8\\u8FD0\\u884C\\u5404\\u79CD\\u540E\\u53F0\\u4EFB\\u52A1\\uFF0C\\u5F53\\u7136\\u4F60\\u4E5F\\u80FD\\u76F4\\u63A5\\u5229\\u7528 nohup \\u547D\\u4EE4\\u4F7F\\u4EFB\\u52A1\\u81EA\\u52A8\\u540E\\u53F0\\u8FD0\\u884C\\uFF0C\\u4F46\\u5982\\u679C\\u8981\\u91CD\\u542F\\u4EFB\\u52A1\\uFF0C\\u6BCF\\u6B21\\u90FD\\u81EA\\u5DF1\\u624B\\u52A8 kill \\u6389\\u4EFB\\u52A1\\u8FDB\\u7A0B\\uFF0C\\u8FD9\\u6837\\u5F88\\u7E41\\u7410\\uFF0C\\u800C\\u4E14\\u4E00\\u65E6\\u7A0B\\u5E8F\\u9519\\u8BEF\\u5BFC\\u81F4\\u8FDB\\u7A0B\\u9000\\u51FA\\u7684\\u8BDD\\uFF0C\\u7CFB\\u7EDF\\u4E5F\\u65E0\\u6CD5\\u81EA\\u52A8\\u91CD\\u8F7D\\u4EFB\\u52A1\\u3002\"}),(0,e.jsx)(a.p,{children:\"virtualenv \\u662F python \\u7684\\u4E00\\u4E2A\\u865A\\u62DF\\u73AF\\u5883\\u7BA1\\u7406\\u5DE5\\u5177\\uFF0C\\u7528\\u6765\\u90E8\\u7F72\\u8FD0\\u884C\\u4E0D\\u540C\\u7684 python \\u7248\\u672C\\uFF0C\\u5F88\\u591A linux \\u53D1\\u884C\\u7248\\u672C\\u7684 python \\u90FD\\u662F 2.x\\uFF0C\\u4F8B\\u5982\\u8981\\u8FD0\\u884C 3.x \\u7248\\u672C\\u7684 python \\u7A0B\\u5E8F\\uFF0C\\u5982\\u679C\\u76F4\\u63A5\\u5347\\u7EA7\\u7CFB\\u7EDF\\u7684 python \\u7248\\u672C\\u7684\\u8BDD\\uFF0C\\u7531\\u4E8E python 3.x \\u65E0\\u6CD5\\u5411\\u524D\\u517C\\u5BB9 2.x \\u7248\\u672C\\u4F1A\\u9020\\u6210\\u7CFB\\u7EDF\\u4F9D\\u8D56\\u5931\\u6548\\u3002\"}),(0,e.jsxs)(a.h2,{id:\"\\u5B89\\u88C5\\u914D\\u7F6E-virtualenv\",children:[(0,e.jsx)(a.a,{href:\"#\\u5B89\\u88C5\\u914D\\u7F6E-virtualenv\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(a.span,{className:\"icon icon-link\"})}),\"\\u5B89\\u88C5\\u914D\\u7F6E virtualenv\"]}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsx)(a.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"pip \",(0,e.jsx)(a.span,{className:\"token function\",children:\"install\"}),` virtualenv\n`]})})}),(0,e.jsx)(a.p,{children:\"\\u5982\\u679C\\u7CFB\\u7EDF\\u672A\\u5B89\\u88C5 pip\\uFF0C\\u53EF\\u76F4\\u63A5\\u4ECE\\u6E90\\u6587\\u4EF6\\u5B89\\u88C5\\uFF0C\\u8BB0\\u5F97\\u7528\\u5F53\\u524D\\u6700\\u65B0\\u7248\\u672C\\u53F7\\u4EE3\\u66FF X.X\"}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsxs)(a.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token function\",children:\"curl\"}),` -O https://pypi.python.org/packages/source/v/virtualenv/virtualenv-X.X.tar.gz\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token function\",children:\"tar\"}),` xvfz virtualenv-X.X.tar.gz\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token builtin class-name\",children:\"cd\"}),` virtualenv-X.X\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"python setup.py \",(0,e.jsx)(a.span,{className:\"token function\",children:\"install\"}),`\n`]})]})}),(0,e.jsx)(a.p,{children:\"\\u5728\\u9879\\u76EE\\u76EE\\u5F55\\u4E0B\\u901A\\u8FC7\\u4EE5\\u4E0B\\u547D\\u4EE4\\u521D\\u59CB\\u5316\\u548C\\u6FC0\\u6D3B\\u865A\\u62DF\\u73AF\\u5883\"}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsxs)(a.code,{className:\"language-bash code-highlight\",children:[(0,e.jsx)(a.span,{className:\"code-line\",children:`virtualenv ENV\n`}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token builtin class-name\",children:\"cd\"}),` ENV\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token builtin class-name\",children:\"source\"}),` bin/activate\n`]})]})}),(0,e.jsxs)(a.h2,{id:\"\\u5B89\\u88C5\\u914D\\u7F6E-supervisor\",children:[(0,e.jsx)(a.a,{href:\"#\\u5B89\\u88C5\\u914D\\u7F6E-supervisor\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(a.span,{className:\"icon icon-link\"})}),\"\\u5B89\\u88C5\\u914D\\u7F6E supervisor\"]}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsx)(a.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"pip \",(0,e.jsx)(a.span,{className:\"token function\",children:\"install\"}),` supervisor\n`]})})}),(0,e.jsx)(a.p,{children:\"ubuntu server \\u4E0A\\u53EF\\u76F4\\u63A5 apt-get \\u5B89\\u88C5\"}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsx)(a.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token function\",children:\"sudo\"}),\" \",(0,e.jsx)(a.span,{className:\"token function\",children:\"apt-get\"}),\" \",(0,e.jsx)(a.span,{className:\"token function\",children:\"install\"}),` supervisor\n`]})})}),(0,e.jsx)(a.p,{children:\"\\u901A\\u8FC7\\u4EE5\\u4E0B\\u547D\\u4EE4\\u751F\\u6210 supervisor \\u793A\\u4F8B\\u914D\\u7F6E\\u6587\\u4EF6\"}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsx)(a.code,{className:\"language-bash code-highlight\",children:(0,e.jsxs)(a.span,{className:\"code-line\",children:[\"echo_supervisord_conf \",(0,e.jsx)(a.span,{className:\"token operator\",children:\">\"}),` /etc/supervisord.conf\n`]})})}),(0,e.jsx)(a.p,{children:\"\\u4FEE\\u6539 supervisord.conf \\u6587\\u4EF6\\uFF0C\\u901A\\u8FC7\\u6DFB\\u52A0 [program:name] \\u6765\\u65B0\\u5EFA\\u4E00\\u4E2A\\u4EFB\\u52A1\\uFF0C\\u4F8B\\u5982\\uFF1A\"}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsxs)(a.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"[\"}),\"program:tornado\",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token assign-left variable\",children:\"directory\"}),(0,e.jsx)(a.span,{className:\"token operator\",children:\"=\"}),`/home/user/website/example.com\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token assign-left variable\",children:\"command\"}),(0,e.jsx)(a.span,{className:\"token operator\",children:\"=\"}),`python server.py\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token assign-left variable\",children:\"autorestart\"}),(0,e.jsx)(a.span,{className:\"token operator\",children:\"=\"}),`true\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token assign-left variable\",children:\"stdout_logfile\"}),(0,e.jsx)(a.span,{className:\"token operator\",children:\"=\"}),`/var/log/example.com/out.log\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token assign-left variable\",children:\"stderr_log\"}),(0,e.jsx)(a.span,{className:\"token operator\",children:\"=\"}),`/var/log/example.com/err.log\n`]})]})}),(0,e.jsx)(a.p,{children:\"\\u4F46\\u6211\\u4EEC\\u5229\\u7528\\u4E86 virtualenv \\u6765\\u751F\\u6210\\u4E86\\u4E0D\\u540C\\u7684\\u865A\\u62DF\\u73AF\\u5883\\uFF0C\\u8FD9\\u91CC\\u7684 command \\u76F4\\u63A5\\u662F python server.py \\u7684\\u80AF\\u5B9A\\u662F\\u4F1A\\u51FA\\u9519\\u7684\\uFF0C\\u6240\\u4EE5\\u6211\\u4EEC\\u9700\\u8981\\u6539\\u6210\\u8FD9\\u6837\\uFF1A\"}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsxs)(a.code,{className:\"language-bash code-highlight\",children:[(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"[\"}),\"program:tornado\",(0,e.jsx)(a.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token assign-left variable\",children:\"directory\"}),(0,e.jsx)(a.span,{className:\"token operator\",children:\"=\"}),`/home/user/website/example.com\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token assign-left variable\",children:\"command\"}),(0,e.jsx)(a.span,{className:\"token operator\",children:\"=\"}),`/home/user/website/example.com/ENV/bin/python server.py\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token assign-left variable\",children:\"autorestart\"}),(0,e.jsx)(a.span,{className:\"token operator\",children:\"=\"}),`true\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token assign-left variable\",children:\"stdout_logfile\"}),(0,e.jsx)(a.span,{className:\"token operator\",children:\"=\"}),`/var/log/example.com/out.log\n`]}),(0,e.jsxs)(a.span,{className:\"code-line\",children:[(0,e.jsx)(a.span,{className:\"token assign-left variable\",children:\"stderr_log\"}),(0,e.jsx)(a.span,{className:\"token operator\",children:\"=\"}),`/var/log/example.com/err.log\n`]})]})}),(0,e.jsx)(a.p,{children:\"\\u63A5\\u4E0B\\u6765\\u8FD0\\u884C\\u4EE5\\u4E0B\\u547D\\u4EE4\\u8FD0\\u52A8 supervisor \\u670D\\u52A1\\uFF1A\"}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsxs)(a.code,{className:\"language-bash code-highlight\",children:[(0,e.jsx)(a.span,{className:\"code-line\",children:`supervisord -c /etc/supervisord.conf\n`}),(0,e.jsx)(a.span,{className:\"code-line\",children:`supervisorctl start tornado\n`})]})}),(0,e.jsx)(a.p,{children:\"\\u91CD\\u8F7D supervisor \\u91CC\\u7684\\u4EFB\\u52A1\\u53EF\\u8FD0\\u884C\\uFF1A\"}),(0,e.jsx)(a.pre,{className:\"language-bash\",children:(0,e.jsx)(a.code,{className:\"language-bash code-highlight\",children:(0,e.jsx)(a.span,{className:\"code-line\",children:`supervisorctl restart tornado\n`})})}),(0,e.jsxs)(a.p,{children:[\"\\u539F\\u6587\\u94FE\\u63A5\\uFF1A\",(0,e.jsx)(a.a,{href:\"https://housne.com/post/setup-supervisor-based-on-virtialenv/\",children:\"https://housne.com/post/setup-supervisor-based-on-virtialenv/\"})]})]})}}var y=f;return b(x);})();\n;return Component;","toc":[{"value":"安装配置 virtualenv","url":"#安装配置-virtualenv","depth":2},{"value":"安装配置 supervisor","url":"#安装配置-supervisor","depth":2}],"frontMatter":{"authors":null,"readingTime":{"text":"2 min read","minutes":1.06,"time":63600,"words":212},"slug":"setup-supervisor-based-on-virtialenv","fileName":"setup-supervisor-based-on-virtialenv.md","title":"配置基于 virtualenv 的 supervisor","date_published":"2016-07-12T02:59:43.000Z","date_updated":"2018-03-09T01:50:23.000Z","author":"Jeffey Wang","tags":["Python","Virtualenv","Supervisor"],"summary":"supervisor 是基于 python 的任务管理工具，用来自动运行各种后台任务。virtualenv 是 python 的一个虚拟环境管理工具，用来部署运行不同的 python 版本。"}},"authorDetails":[{"authors":null,"readingTime":{"text":"1 min read","minutes":0.235,"time":14100,"words":47},"slug":"default","fileName":"default.md","name":"Jeffrey Wang","avatar":"//static/images/avatar.jpg","occupation":"前端开发工程师","company":"深圳大学","email":"546323405@qq.com","github":"https://github.com/armyja","sinaWeibo":"sinaweibo://userinfo?uid=1770048285"}],"prev":{"title":"Android 与 Web 服务器 在 Session 下通信","summary":"最近在开发项目的过程中，遇到android与web服务器要在同一session下通信的问题。","tags":["Android"],"slug":"android-web-session","date_published":"2016-07-10T14:41:30.000Z","date_updated":"2018-03-09T01:30:50.000Z","draft":false,"author":"Jeffey Wang"},"next":{"title":"Linux 如何查找文件安装路径","summary":"Linux 中查看某个软件的安装路径(地址)有时显得非常重要。比如某个文件的快速启动项被删除，或者你要建立快速启动项，或者想删除、添加安装文件等等，很多地方都要用到查看文件安装路径的命令。","tags":["Linux"],"slug":"linux-how-to-find-installation-path","date_published":"2016-09-16T03:20:42.000Z","date_updated":"2018-03-09T08:02:15.000Z","draft":false,"author":"Jeffey Wang"}},"__N_SSG":true}