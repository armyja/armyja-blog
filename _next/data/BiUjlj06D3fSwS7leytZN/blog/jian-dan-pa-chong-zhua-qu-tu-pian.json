{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var h=Object.create;var d=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var l=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var m=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports),x=(n,t)=>{for(var r in t)d(n,r,{get:t[r],enumerable:!0})},a=(n,t,r,s)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let i of l(t))!g.call(n,i)&&i!==r&&d(n,i,{get:()=>t[i],enumerable:!(s=p(t,i))||s.enumerable});return n};var f=(n,t,r)=>(r=n!=null?h(u(n)):{},a(t||!n||!n.__esModule?d(r,\"default\",{value:n,enumerable:!0}):r,n)),q=n=>a(d({},\"__esModule\",{value:!0}),n);var o=m((J,c)=>{c.exports=_jsx_runtime});var b={};x(b,{default:()=>P,frontmatter:()=>_});var e=f(o()),_={title:\"Python \\u722C\\u866B\\uFF1A\\u7B80\\u5355\\u6293\\u53D6\\u56FE\\u7247\",slug:\"jian-dan-pa-chong-zhua-qu-tu-pian\",date_published:new Date(1458908428e3),date_updated:new Date(1458985538e3),author:\"Jeffey Wang\",tags:\"Python\"};function w(n={}){let{wrapper:t}=n.components||{};return t?(0,e.jsx)(t,Object.assign({},n,{children:(0,e.jsx)(r,{})})):r();function r(){let s=Object.assign({blockquote:\"blockquote\",p:\"p\",h3:\"h3\",a:\"a\",span:\"span\",strong:\"strong\",code:\"code\"},n.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.blockquote,{children:(0,e.jsx)(s.p,{children:\"\\u6700\\u8FD1\\u722C\\u4E86\\u6570\\u5343\\u5F20\\u5934\\u50CF\\u3002\\u544A\\u8BC9\\u4F60\\u6211\\u662F\\u5982\\u4F55\\u505A\\u5230\\u6EF4\\u3002\"})}),(0,e.jsxs)(s.h3,{id:\"\\u76EE\\u6807\",children:[(0,e.jsx)(s.a,{href:\"#\\u76EE\\u6807\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(s.span,{className:\"icon icon-link\"})}),\"\\u76EE\\u6807\"]}),(0,e.jsxs)(s.p,{children:[\"\\u66B4\\u529B\\u6293\\u53D6 \",(0,e.jsx)(s.strong,{children:\"\\u7279\\u5B9A\\u7F51\\u5740\"}),\" \\u4E0B \",(0,e.jsx)(s.strong,{children:\"\\u7279\\u5B9A\\u6570\\u5B57\\u683C\\u5F0F\"}),\" \\u7684 \",(0,e.jsx)(s.code,{children:\"jpg\"}),\" \\u6587\\u4EF6\\u3002\"]}),(0,e.jsxs)(s.h3,{id:\"\\u5DE5\\u5177\",children:[(0,e.jsx)(s.a,{href:\"#\\u5DE5\\u5177\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(s.span,{className:\"icon icon-link\"})}),\"\\u5DE5\\u5177\"]}),(0,e.jsxs)(s.p,{children:[(0,e.jsx)(s.a,{href:\"http://www.python-requests.org/\",children:\"Requests\"}),\" \\uFF1A \\u4E00\\u4E2A\\u4F7F\\u7528 Apache2 Licensed \\u8BB8\\u53EF\\u8BC1\\u7684 HTTP \\u5E93\\u3002\"]}),(0,e.jsxs)(s.p,{children:[\"\\u5B89\\u88C5 Requests \\uFF1A\",(0,e.jsx)(s.code,{children:\"pip install requests\"})]}),(0,e.jsxs)(s.h3,{id:\"\\u6817\\u5B50\",children:[(0,e.jsx)(s.a,{href:\"#\\u6817\\u5B50\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(s.span,{className:\"icon icon-link\"})}),\"\\u6817\\u5B50\"]}),(0,e.jsxs)(s.p,{children:[\"\\u83B7\\u5F97 \",(0,e.jsx)(s.code,{children:\"http://127.0.0.1/photos/\"}),\" \\u4E0B\\u4ECE \",(0,e.jsx)(s.code,{children:\"000001.JPG\"}),\" \\u81F3 \",(0,e.jsx)(s.code,{children:\"999999.JPG\"}),\" \\u7684\\u56FE\\u7247\\u3002 \",(0,e.jsx)(s.code,{children:\"get_pic.py\"}),\" \\u4EE3\\u7801\\u5982\\u4E0B\\uFF1A\"]}),(0,e.jsx)(s.p,{children:\"import requests import os # \\u7528\\u4E8E\\u64CD\\u4F5C\\u6587\\u4EF6\"}),(0,e.jsx)(s.p,{children:\"requests.adapters.DEFAULT_RETRIES = 5\"}),(0,e.jsxs)(s.p,{children:[\"url = '\",(0,e.jsx)(s.a,{href:\"http://127.0.0.1/photos/\",children:\"http://127.0.0.1/photos/\"}),\"' # \\u6293\\u53D6\\u8BE5\\u7F51\\u5740\\u4E0B\\u7684\\u56FE\\u7247 added=[] # \\u4FDD\\u5B58\\u672C\\u6B21\\u722C\\u866B\\u4E0B\\u8F7D\\u7684\\u6587\\u4EF6\\u540D p = 1 # \\u8BBE\\u7F6E\\u6570\\u5B57\\u8D77\\u70B9 max= 10000000 # \\u8BBE\\u7F6E\\u6570\\u5B57\\u7EC8\\u70B9\"]}),(0,e.jsx)(s.p,{children:\"while p < max: ss = str(p) while len(ss) < 6: ss = '0' + ss # \\u8F6C\\u6362\\u4E3A 6 \\u4F4D\\u5B57\\u7B26\\u4E32\\uFF08 \\u5982 1 \\u8F6C\\u6362\\u6210 000001 \\uFF09\\uFF0C\\u5B58\\u50A8\\u5230ss if not os.path.exists('%s.JPG' %ss): # \\u5982\\u679C JPG \\u6587\\u4EF6\\u4E0D\\u5B58\\u5728\\uFF0C\\u5C1D\\u8BD5\\u4E0B\\u8F7D\\u5B83 print('saving: %s'%ss) try: r = requests.get(url + '%s.JPG' %ss, timeout=2) # \\u62FC\\u63A5\\u6210\\u5B8C\\u6574\\u7F51\\u5740\\uFF0C\\u8BF7\\u6C42\\u83B7\\u53D6\\u56FE\\u7247 if r.status_code == requests.codes.ok: # \\u5982\\u679C\\u6210\\u529F\\u8BBF\\u95EE with open('%s.JPG' %ss, 'wb') as pic: # pic.write(r.content) # \\u5C06\\u83B7\\u53D6\\u5185\\u5BB9\\u5199\\u5165 JPG \\u6587\\u4EF6 print('%s saved!' %ss) added.append(p) # \\u4FDD\\u5B58\\u6587\\u4EF6\\u540D\\u81F3\\u5217\\u8868 except: # \\u5982\\u679C\\u8BBF\\u95EE\\u5931\\u8D25 print('save %s failed' %ss) else: print('%s exists' %ss) p = p + 1\"}),(0,e.jsx)(s.p,{children:\"print(added) # \\u8F93\\u51FA\\u5DF2\\u4E0B\\u8F7D\\u7684 JPG \\u7684\\u6587\\u4EF6\\u540D\"})]})}}var P=w;return q(b);})();\n;return Component;","toc":[{"value":"目标","url":"#目标","depth":3},{"value":"工具","url":"#工具","depth":3},{"value":"栗子","url":"#栗子","depth":3}],"frontMatter":{"authors":null,"readingTime":{"text":"1 min read","minutes":0.86,"time":51600,"words":172},"slug":"jian-dan-pa-chong-zhua-qu-tu-pian","fileName":"jian-dan-pa-chong-zhua-qu-tu-pian.md","title":"Python 爬虫：简单抓取图片","date_published":"2016-03-25T12:20:28.000Z","date_updated":"2016-03-26T09:45:38.000Z","author":"Jeffey Wang","tags":["Python"]}},"authorDetails":[{"authors":null,"readingTime":{"text":"1 min read","minutes":0.26,"time":15600,"words":52},"slug":"default","fileName":"default.md","name":"Jeffrey Wang","avatar":"//static/images/avatar.jpg","occupation":"前端开发工程师","company":"深圳大学","email":"546323405@qq.com","github":"https://github.com/armyja","sinaWeibo":"https://weibo.com/armyja"}],"prev":{"title":"Nginx：域名跳转、端口转发","summary":"","tags":["Nginx"],"slug":"nigixshi-xian-yu-ming-tiao-zhuan-ji-duan-kou-zhuan-fa","date_published":"2016-03-25T11:47:15.000Z","date_updated":"2016-04-03T17:21:26.000Z","draft":false,"author":"Jeffey Wang"},"next":{"title":"Ghost： 手动指定摘要位置","summary":"","tags":["Ghost"],"slug":"ghost-shou-dong-zhi-ding-zhai-yao-wei-zhi","date_published":"2016-03-26T03:41:00.000Z","date_updated":"2016-03-26T17:04:34.000Z","draft":false,"author":"Jeffey Wang"}},"__N_SSG":true}