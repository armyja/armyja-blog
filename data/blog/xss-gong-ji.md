---
title: XSS 攻击
slug: xss-gong-ji
date_published: 2021-05-19T00:55:05.000Z
date_updated: 2021-05-19T00:55:05.000Z
---

### XSS 定义

XSS, 即为（Cross Site Scripting）, 中文名为跨站脚本, 是发生在目标用户的浏览器层面
上的，当渲染 DOM 树的过程成发生了不在预期内执行的 JS 代码时，就发生了 XSS 攻击。
大多数 XSS 攻击的主要方式是嵌入一段远程或者第三方域上的 JS 代码。实际上是在目
标网站的作用域下执行了这段 JS 代码。

### 按效果分类型

第一、XSS 反射型攻击，恶意代码并没有保存在目标网站，通过引诱用户点击一个链接到目标网站的恶意链接来实施攻击的。

反射型的话不存储在数据库中，往往表现为将攻击代码放在 url 地址的请求参数中，防御的话为
cookie 设置 httpOnly 属性；对用户的输入进行检查，进行特殊字符过滤。

第二、XSS 存储型攻击，恶意代码被保存到目标网站的服务器中，这种攻击具有较强的稳定性和持久性，比较常见场景是在博客，论坛等社交网站上，但 OA 系统，和 CRM 系统上也能看到它身影，比如：某 CRM 系统的客户投诉功能上存在 XSS 存储型漏洞，黑客提交了恶意攻击代码，当系统管理员查看投诉信息时恶意代码执行，窃取了客户的资料，然而管理员毫不知情，这就是典型的 XSS 存储型攻击。

### XSS 防御总体思路

XSS 防御的总体思路是：对输入(和 URL 参数)进行过滤，对输出进行编码。也就是对提交的所有内容进行过滤，对 url 中的参数进行过滤，过滤掉会导致脚本执行的相关内容；
然后对动态输出到页面的内容进行 html 编码，使脚本无法在浏览器中执行。虽然对输入过滤可以被绕过，但是也还是会拦截很大一部分的 XSS 攻击。
